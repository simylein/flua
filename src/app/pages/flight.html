<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="Flight statistics for paragliders including igc file upload" />
		<title>Flight statistics</title>
		<style></style>
	</head>
	<body
		class="font-sans flex flex-col m-0 text-base leading-none text-black background-white dark:text-white dark:background-black"
		onload="paintTitle(); loadYears(); loadFlights();"
	>
		<notifications ref="./src/app/components/notifications.html" />
		<main class="flex flex-col items-center gap-2 md:gap-3 lg:gap-4 m-4 md:m-6 lg:m-8">
			<div class="w-full max-w-2xl flex gap-4 md:gap-6 lg:gap-8 items-end justify-between">
				<h1 id="title" class="w-64 h-4.5 m-0 text-lg font-normal background-neutral-200 dark:background-neutral-800"></h1>
				<a href="/settings" class="no-underline text-base font-normal text-blue-600 dark:text-blue-400">settings</a>
			</div>
			<div class="w-full max-w-2xl flex gap-4 md:gap-6 lg:gap-8 justify-between">
				<div id="ranges" class="flex gap-2 md:gap-3 lg:gap-4 overflow-x-scroll scrollbar-none">
					<button class="p-1 md:p-1.5 lg:p-2 border-none background-neutral-100 dark:background-neutral-900 cursor-default">
						<p class="m-0 h-4 w-9 text-base leading-none font-normal text-black dark:text-white background-neutral-200 dark:background-neutral-800"></p>
					</button>
					<button class="p-1 md:p-1.5 lg:p-2 border-none background-neutral-100 dark:background-neutral-900 cursor-default">
						<p class="m-0 h-4 w-9 text-base leading-none font-normal text-black dark:text-white background-neutral-200 dark:background-neutral-800"></p>
					</button>
					<button class="p-1 md:p-1.5 lg:p-2 border-none background-neutral-100 dark:background-neutral-900 cursor-default">
						<p class="m-0 h-4 w-9 text-base leading-none font-normal text-black dark:text-white background-neutral-200 dark:background-neutral-800"></p>
					</button>
					<button class="p-1 md:p-1.5 lg:p-2 border-none background-neutral-100 dark:background-neutral-900 cursor-default">
						<p class="m-0 h-4 w-9 text-base leading-none font-normal text-black dark:text-white background-neutral-200 dark:background-neutral-800"></p>
					</button>
				</div>
				<button id="upload" class="flex items-center justify-center border-none p-0 background-blue-200 dark:background-blue-800">
					<label for="file-upload" class="p-1 md:p-1.5 lg:p-2 text-base font-normal text-black dark:text-white cursor-pointer">Upload</label>
					<input id="file-upload" type="file" class="hidden" accept=".igc" multiple onchange="uploadFlights(event)" />
				</button>
			</div>
			<div class="w-full max-w-2xl flex flex-col md:flex-row gap-2 md:gap-3 lg:gap-4">
				<div class="flex-1 p-2 md:p-3 lg:p-4 background-neutral-100 dark:background-neutral-900">
					<div class="flex justify-between gap-2 mb-2">
						<h2 class="m-0 text-base font-normal">Flights</h2>
						<p id="flight-count" class="w-10 h-4 m-0 text-base font-normal background-neutral-200 dark:background-neutral-800"></p>
					</div>
					<div style="grid-template-columns: auto 1fr; grid-template-rows: auto auto" class="grid gap-1 sm:gap-2 md:gap-1 lg:gap-2">
						<div id="flight-scale" class="flex flex-col text-xs text-end">
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
						</div>
						<div class="relative flex flex-col">
							<div class="absolute w-full h-full">
								<div id="flight-graph" class="flex justify-between w-full h-full gap-1 sm:gap-2 md:gap-1 lg:gap-2 xl:gap-3">
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 8%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 17%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 42%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 69%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 82%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 73%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 56%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 37%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 16%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 8%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
								</div>
							</div>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
						</div>
						<div></div>
						<div class="w-full flex justify-around text-xs">
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Jan</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">J</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Feb</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">F</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Mar</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">M</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Apr</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">A</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">May</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">M</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Jun</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">J</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Jul</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">J</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Aug</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">A</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Sep</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">S</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Oct</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">O</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Nov</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">N</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Dec</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">D</label>
							</div>
						</div>
					</div>
				</div>
				<div class="flex-1 p-2 md:p-3 lg:p-4 background-neutral-100 dark:background-neutral-900">
					<div class="flex justify-between gap-2 mb-2">
						<h2 class="m-0 text-base font-normal">Airtime</h2>
						<p id="airtime-count" class="w-10 h-4 m-0 text-base font-normal background-neutral-200 dark:background-neutral-800"></p>
					</div>
					<div style="grid-template-columns: auto 1fr; grid-template-rows: auto auto" class="grid gap-1 sm:gap-2 md:gap-1 lg:gap-2">
						<div id="airtime-scale" class="flex flex-col text-xs text-end">
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
							<label class="min-w-7 h-3 mt-5 text-neutral-600 dark:text-neutral-400 background-neutral-200 dark:background-neutral-800"></label>
						</div>
						<div class="relative flex flex-col">
							<div class="absolute w-full h-full">
								<div id="airtime-graph" class="flex justify-between w-full h-full gap-1 sm:gap-2 md:gap-1 lg:gap-2 xl:gap-3">
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 8%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 17%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 42%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 69%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 82%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 73%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 56%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 37%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 16%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
									<div class="flex flex-col-reverse w-full h-full">
										<div style="height: 8%" class="background-neutral-200 dark:background-neutral-800"></div>
									</div>
								</div>
							</div>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
							<span class="box-border h-8 border-0 border-b-1 border-solid border-neutral-300 dark:border-neutral-600"></span>
						</div>
						<div></div>
						<div class="w-full flex justify-around text-xs">
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Jan</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">J</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Feb</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">F</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Mar</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">M</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Apr</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">A</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">May</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">M</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Jun</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">J</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Jul</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">J</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Aug</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">A</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Sep</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">S</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Oct</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">O</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Nov</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">N</label>
							</div>
							<div>
								<label class="hidden sm:block text-neutral-600 dark:text-neutral-400">Dec</label>
								<label class="sm:hidden text-neutral-600 dark:text-neutral-400">D</label>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="w-full max-w-2xl flex flex-col md:flex-row gap-2 md:gap-3 lg:gap-4">
				<div class="flex-1 p-2 md:p-3 lg:p-4 background-neutral-100 dark:background-neutral-900">
					<div class="flex justify-between items-end gap-2 mb-2">
						<h2 class="m-0 text-base font-normal">Altitude</h2>
						<p id="altitude-stats" class="w-32 h-3.5 m-0 text-sm font-normal background-neutral-200 dark:background-neutral-800"></p>
					</div>
					<div style="grid-template-columns: 1fr; grid-template-rows: auto auto" class="grid gap-1 sm:gap-2 md:gap-1 lg:gap-2">
						<div id="altitude-scale" class="h-3 flex flex-wrap text-xs background-neutral-200 dark:background-neutral-800">
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-green-400/80 dark:background-green-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">0<span class="hidden sm:inline md:hidden xl:inline">km</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-teal-400/80 dark:background-teal-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">1<span class="hidden sm:inline md:hidden xl:inline">km</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-sky-400/80 dark:background-sky-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">2<span class="hidden sm:inline md:hidden xl:inline">km</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-indigo-400/80 dark:background-indigo-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">3<span class="hidden sm:inline md:hidden xl:inline">km</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-purple-400/80 dark:background-purple-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">4<span class="hidden sm:inline md:hidden xl:inline">km</span></label>
								<p class="m-0"></p>
							</div>
						</div>
						<div id="altitude-graph" class="flex flex-col">
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="flex-1 p-2 md:p-3 lg:p-4 background-neutral-100 dark:background-neutral-900">
					<div class="flex justify-between items-end gap-2 mb-2">
						<h2 class="m-0 text-base font-normal">Thermal</h2>
						<p id="thermal-stats" class="w-32 h-3.5 m-0 text-sm font-normal background-neutral-200 dark:background-neutral-800"></p>
					</div>
					<div style="grid-template-columns: 1fr; grid-template-rows: auto auto" class="grid gap-1 sm:gap-2 md:gap-1 lg:gap-2">
						<div id="thermal-scale" class="h-3 flex flex-wrap text-xs background-neutral-200 dark:background-neutral-800">
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-amber-400/80 dark:background-amber-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">0<span class="hidden sm:inline md:hidden xl:inline">m/s</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-lime-400/80 dark:background-lime-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">1<span class="hidden sm:inline md:hidden xl:inline">m/s</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-emerald-400/80 dark:background-emerald-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">2<span class="hidden sm:inline md:hidden xl:inline">m/s</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-cyan-400/80 dark:background-cyan-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">3<span class="hidden sm:inline md:hidden xl:inline">m/s</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-blue-400/80 dark:background-blue-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">4<span class="hidden sm:inline md:hidden xl:inline">m/s</span></label>
								<p class="m-0"></p>
							</div>
						</div>
						<div id="thermal-graph" class="flex flex-col">
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="w-full max-w-2xl flex flex-col md:flex-row gap-2 md:gap-3 lg:gap-4">
				<div class="flex-1 p-2 md:p-3 lg:p-4 background-neutral-100 dark:background-neutral-900">
					<div class="flex justify-between items-end gap-2 mb-2">
						<h2 class="m-0 text-base font-normal">Speed</h2>
						<p id="speed-stats" class="w-32 h-3.5 m-0 text-sm font-normal background-neutral-200 dark:background-neutral-800"></p>
					</div>
					<div style="grid-template-columns: 1fr; grid-template-rows: auto auto" class="grid gap-1 sm:gap-2 md:gap-1 lg:gap-2">
						<div id="speed-scale" class="h-3 flex flex-wrap text-xs background-neutral-200 dark:background-neutral-800">
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-green-400/80 dark:background-green-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">20<span class="hidden sm:inline md:hidden xl:inline">km/h</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-teal-400/80 dark:background-teal-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">30<span class="hidden sm:inline md:hidden xl:inline">km/h</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-sky-400/80 dark:background-sky-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">40<span class="hidden sm:inline md:hidden xl:inline">km/h</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-indigo-400/80 dark:background-indigo-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">50<span class="hidden sm:inline md:hidden xl:inline">km/h</span></label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-purple-400/80 dark:background-purple-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400">60<span class="hidden sm:inline md:hidden xl:inline">km/h</span></label>
								<p class="m-0"></p>
							</div>
						</div>
						<div id="speed-graph" class="flex flex-col">
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="flex-1 p-2 md:p-3 lg:p-4 background-neutral-100 dark:background-neutral-900">
					<div class="flex justify-between items-end gap-2 mb-2">
						<h2 class="m-0 text-base font-normal">Glide</h2>
						<p id="glide-stats" class="w-32 h-3.5 m-0 text-sm font-normal background-neutral-200 dark:background-neutral-800"></p>
					</div>
					<div style="grid-template-columns: 1fr; grid-template-rows: auto auto" class="grid gap-1 sm:gap-2 md:gap-1 lg:gap-2">
						<div id="glide-scale" class="h-3 flex flex-wrap text-xs background-neutral-200 dark:background-neutral-800">
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-amber-400/80 dark:background-amber-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400"><span class="hidden sm:inline md:hidden xl:inline">1/</span>4</label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-lime-400/80 dark:background-lime-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400"><span class="hidden sm:inline md:hidden xl:inline">1/</span>6</label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-emerald-400/80 dark:background-emerald-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400"><span class="hidden sm:inline md:hidden xl:inline">1/</span>8</label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-cyan-400/80 dark:background-cyan-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400"><span class="hidden sm:inline md:hidden xl:inline">1/</span>10</label>
								<p class="m-0"></p>
							</div>
							<div class="hidden items-center gap-1 mr-2 sm:mr-4 md:mr-2 lg:mr-4">
								<span class="w-2 h-2 background-blue-400/80 dark:background-blue-600/80"></span>
								<label class="text-neutral-600 dark:text-neutral-400"><span class="hidden sm:inline md:hidden xl:inline">1/</span>12</label>
								<p class="m-0"></p>
							</div>
						</div>
						<div id="glide-graph" class="flex flex-col">
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
							<div class="flex w-full h-4">
								<div style="width: 12%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 24%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 40%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 20%" class="background-neutral-200 dark:background-neutral-800"></div>
								<div style="width: 4%" class="background-neutral-200 dark:background-neutral-800"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="w-full max-w-2xl">
				<div class="p-2 md:p-3 lg:p-4 background-neutral-100 dark:background-neutral-900">
					<div class="flex justify-between gap-2 mb-2">
						<h2 class="m-0 text-base font-normal">Logbook</h2>
					</div>
					<div class="h-40 overflow-y-scroll scrollbar-none">
						<table class="w-full border-spacing-0">
							<thead class="sticky top-0 text-nowrap background-neutral-100 dark:background-neutral-900">
								<tr>
									<th class="p-0 pb-1 pr-1 md:pr-1.5 lg:pr-2 text-start text-sm font-normal">Date</th>
									<th class="p-0 pb-1 pr-1 md:pr-1.5 lg:pr-2 text-start text-sm font-normal">Takeoff</th>
									<th class="p-0 pb-1 pr-1 md:pr-1.5 lg:pr-2 text-start text-sm font-normal">Landing</th>
									<th class="p-0 pb-1 pr-1 md:pr-1.5 lg:pr-2 text-start text-sm font-normal">Min altitude</th>
									<th class="p-0 pb-1 pr-1 md:pr-1.5 lg:pr-2 text-start text-sm font-normal">Max altitude</th>
									<th class="p-0 pb-1 pr-1 md:pr-1.5 lg:pr-2 text-start text-sm font-normal">Max climb</th>
									<th class="p-0 pb-1 pr-1 md:pr-1.5 lg:pr-2 text-start text-sm font-normal">Max sink</th>
									<th class="p-0 pb-1 pr-1 md:pr-1.5 lg:pr-2 text-start text-sm font-normal">Avg speed</th>
									<th class="p-0 pb-1 pr-1 md:pr-1.5 lg:pr-2 text-start text-sm font-normal">Max speed</th>
									<th class="p-0 pb-1 text-start text-sm font-normal">Distance flown</th>
								</tr>
							</thead>
							<tbody id="logbook-body" class="overflow-x-scroll scrollbar-none text-nowrap">
								<tr>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-20 h-4 p-0 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
								</tr>
								<tr>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-20 h-4 p-0 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
								</tr>
								<tr>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-20 h-4 p-0 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
								</tr>
								<tr>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-20 h-4 p-0 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
								</tr>
								<tr>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-20 h-4 p-0 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
								</tr>
								<tr>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-20 h-4 p-0 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
								</tr>
								<tr>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-20 h-4 p-0 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
								</tr>
								<tr>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-9 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-10 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-12 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-16 h-4 p-0 pr-1 md:pr-1.5 lg:pr-2 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
									<td class="w-20 h-4 p-0 text-xs font-normal background-neutral-200 dark:background-neutral-800"></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</main>
	</body>
	<script>
		import './src/app/scripts/array.js';
		import './src/app/scripts/state.js';
		import './src/app/scripts/fetcher.js';
		import './src/app/scripts/fetching.js';
		import './src/app/scripts/report.js';
		import './src/app/scripts/notification.js';
		const years = { retries: 0, reload: null, timeout: null, controller: null, data: null };
		const flights = { retries: 0, reload: null, timeout: null, controller: null, data: null };
		const verticalSkeletons = [4, 8, 17, 24, 42, 69, 82, 73, 56, 37, 16, 8];
		const horizontalSkeletons = [12, 24, 40, 20, 4];
		const title = document.getElementById('title');
		const ranges = document.getElementById('ranges');
		const flight = {
			count: document.getElementById('flight-count'),
			scale: document.getElementById('flight-scale'),
			graph: document.getElementById('flight-graph'),
		};
		const airtime = {
			count: document.getElementById('airtime-count'),
			scale: document.getElementById('airtime-scale'),
			graph: document.getElementById('airtime-graph'),
		};
		const altitude = {
			stats: document.getElementById('altitude-stats'),
			scale: document.getElementById('altitude-scale'),
			graph: document.getElementById('altitude-graph'),
		};
		const altitudeColors = [
			['background-green-400/80', 'dark:background-green-600/80'],
			['background-teal-400/80', 'dark:background-teal-600/80'],
			['background-sky-400/80', 'dark:background-sky-600/80'],
			['background-indigo-400/80', 'dark:background-indigo-600/80'],
			['background-purple-400/80', 'dark:background-purple-600/80'],
		];
		const thermal = {
			stats: document.getElementById('thermal-stats'),
			scale: document.getElementById('thermal-scale'),
			graph: document.getElementById('thermal-graph'),
		};
		const thermalColors = [
			['background-amber-400/80', 'dark:background-amber-600/80'],
			['background-lime-400/80', 'dark:background-lime-600/80'],
			['background-emerald-400/80', 'dark:background-emerald-600/80'],
			['background-cyan-400/80', 'dark:background-cyan-600/80'],
			['background-blue-400/80', 'dark:background-blue-600/80'],
		];
		const speed = {
			stats: document.getElementById('speed-stats'),
			scale: document.getElementById('speed-scale'),
			graph: document.getElementById('speed-graph'),
		};
		const speedColors = [
			['background-green-400/80', 'dark:background-green-600/80'],
			['background-teal-400/80', 'dark:background-teal-600/80'],
			['background-sky-400/80', 'dark:background-sky-600/80'],
			['background-indigo-400/80', 'dark:background-indigo-600/80'],
			['background-purple-400/80', 'dark:background-purple-600/80'],
		];
		const glide = {
			stats: document.getElementById('glide-stats'),
			scale: document.getElementById('glide-scale'),
			graph: document.getElementById('glide-graph'),
		};
		const glideColors = [
			['background-amber-400/80', 'dark:background-amber-600/80'],
			['background-lime-400/80', 'dark:background-lime-600/80'],
			['background-emerald-400/80', 'dark:background-emerald-600/80'],
			['background-cyan-400/80', 'dark:background-cyan-600/80'],
			['background-blue-400/80', 'dark:background-blue-600/80'],
		];
		const logbook = { body: document.getElementById('logbook-body') };
		const units = (amount) => {
			switch (true) {
				case amount >= 1e4:
					return `${(amount / 1e3).toFixed(1)}k`;
				case amount >= 1e3:
					return `${(amount / 1e3).toFixed(2)}k`;
				case amount >= 1e1:
					return amount.toFixed(0);
				default:
					return amount % 1 === 0 ? amount : amount.toFixed(1);
			}
		};
		const times = (seconds) => {
			switch (true) {
				case seconds >= 36000:
					return `${Math.floor(seconds / 3600)}h`;
				case seconds >= 3600:
					return `${(seconds / 3600).toFixed(1)}h`;
				case seconds >= 600:
					return `${Math.floor(seconds / 60)}m`;
				case seconds >= 60:
					return `${(seconds / 60).toFixed(1)}m`;
				default:
					return seconds % 1 === 0 ? `${seconds}s` : `${seconds.toFixed(1)}s`;
			}
		};
		const resize = (element, length) => {
			let index = 0;
			while (element.children.length !== length) {
				const diff = element.children.length - length;
				if (diff < 0) {
					const copy = element.children[0].cloneNode(true);
					element.appendChild(copy);
				} else if (diff > 0 && element.children.length > 0) {
					element.children[element.children.length - 1].remove();
				}
				index++;
			}
		};
		const getUser = () => {
			const user = window.location.pathname.substring(1);
			return user ?? null;
		};
		const paintTitle = () => {
			paint(title, [], ['w-64', 'h-7'], `Flight statistics for ${window.location.pathname.substring(1)}`);
		};
		const getYear = () => {
			const year = new URLSearchParams(window.location.search).get('year');
			return +(year ?? new Date().getFullYear());
		};
		const setYear = (year) => {
			const params = new URLSearchParams(window.location.search);
			params.set('year', year);
			window.history.replaceState({}, '', `${window.location.pathname}?${params.toString()}`);
		};
		const highlightYear = (year) => {
			array(ranges.children.length).forEach((ind) => {
				if (+ranges.children[ind].children[0].innerText === year) {
					ranges.children[ind].children[0].classList.add('text-blue-600', 'dark:text-blue-400');
				} else {
					ranges.children[ind].children[0].classList.remove('text-blue-600', 'dark:text-blue-400');
				}
			});
		};
		const loadingYears = () => {
			resize(ranges, ranges.children.length);
			array(ranges.children.length).forEach((ind) => {
				ranges.children[ind].onclick = null;
				ranges.children[ind].classList.remove('cursor-pointer', 'cursor-not-allowed');
				ranges.children[ind].classList.add('cursor-default');
				loading(ranges.children[ind].children[0], ['w-9', 'h-4'], [], '');
			});
		};
		const paintYears = (data) => {
			resize(ranges, data.length);
			array(ranges.children.length).forEach((ind) => {
				if (data[ind]) {
					ranges.children[ind].classList.remove('cursor-default');
					ranges.children[ind].classList.add('cursor-pointer');
					ranges.children[ind].children[0].classList.remove('w-9', 'h-4', 'background-neutral-200', 'dark:background-neutral-800');
					ranges.children[ind].children[0].innerText = data[ind].year;
					ranges.children[ind].onclick = () => {
						highlightYear(data[ind].year);
						setYear(data[ind].year);
						loadFlights();
					};
				}
			});
			highlightYear(getYear());
		};
		const errorYears = () => {
			array(ranges.children.length).forEach((ind) => {
				ranges.children[ind].classList.remove('cursor-default');
				ranges.children[ind].classList.add('cursor-not-allowed');
				error(ranges.children[ind].children[0]);
			});
		};
		const loadingFlight = (element) => {
			loading(element.count, ['w-10', 'h-4'], [], '');
			array(element.scale.children.length).forEach((ind) => {
				loading(element.scale.children[ind], ['h-3'], [], '');
			});
			array(element.graph.children.length).forEach((ind) => {
				loading(element.graph.children[ind].children[0], [], ['background-green-400/80', 'dark:background-green-600/80'], null, verticalSkeletons[ind]);
			});
		};
		const paintFlight = (element, flight) => {
			paint(element.count, [], ['w-10', 'h-4'], units(flight.sum));
			const max = Math.max(...flight.bins);
			array(element.scale.children.length).forEach((ind) => {
				paint(element.scale.children[ind], [], ['h-3'], units((max / element.scale.children.length) * (5 - ind)));
			});
			array(element.graph.children.length).forEach((index) => {
				array(element.graph.children[index].children.length).forEach((ind) => {
					element.graph.children[index].children[ind].style.height = null;
				});
				const percent = (flight.bins[index] / max) * 100;
				paint(element.graph.children[index].children[0], ['background-green-400/80', 'dark:background-green-600/80'], [], null, percent);
			});
		};
		const errorFlight = (element) => {
			error(element.count);
			array(element.scale.children.length).forEach((ind) => {
				error(element.scale.children[ind]);
			});
			array(element.graph.children.length).forEach((ind) => {
				error(element.graph.children[ind].children[0]);
			});
		};
		const loadingAirtime = (element) => {
			loading(element.count, ['w-10', 'h-4'], [], '');
			array(element.scale.children.length).forEach((ind) => {
				loading(element.scale.children[ind], ['h-3'], [], '');
			});
			array(element.graph.children.length).forEach((ind) => {
				loading(element.graph.children[ind].children[0], [], ['background-blue-400/80', 'dark:background-blue-600/80'], null, verticalSkeletons[ind]);
			});
		};
		const paintAirtime = (element, airtime) => {
			paint(element.count, [], ['w-10', 'h-4'], times(airtime.sum));
			const max = Math.max(...airtime.bins);
			array(element.scale.children.length).forEach((ind) => {
				paint(element.scale.children[ind], [], ['h-3'], times((max / element.scale.children.length) * (5 - ind)));
			});
			array(element.graph.children.length).forEach((index) => {
				array(element.graph.children[index].children.length).forEach((ind) => {
					element.graph.children[index].children[ind].style.height = null;
				});
				const percent = (airtime.bins[index] / max) * 100;
				paint(element.graph.children[index].children[0], ['background-blue-400/80', 'dark:background-blue-600/80'], [], null, percent);
			});
		};
		const errorAirtime = (element) => {
			error(element.count);
			array(element.scale.children.length).forEach((ind) => {
				error(element.scale.children[ind]);
			});
			array(element.graph.children.length).forEach((ind) => {
				error(element.graph.children[ind].children[0]);
			});
		};
		const loadingAltitude = (element) => {
			loading(element.stats, ['w-32', 'h-3.5'], [], '');
			loading(element.scale, ['h-3'], []);
			array(element.scale.children.length).forEach((ind) => {
				element.scale.children[ind].classList.add('hidden');
				element.scale.children[ind].classList.remove('flex');
			});
			array(element.graph.children.length).forEach((ind) => {
				array(element.graph.children[ind].children.length).forEach((i) => {
					loading(element.graph.children[ind].children[i], [], altitudeColors[i], null, null, horizontalSkeletons[i]);
				});
			});
		};
		const paintAltitude = (element, altitude) => {
			paint(element.stats, [], ['w-32', 'h-3.5'], altitude.min === null || altitude.max === null ? '' : `${altitude.min}m - ${altitude.max}m`);
			const sumMax = altitude.sum.reduce((accumulator, altitude) => accumulator + altitude, 0);
			if (sumMax > 0) {
				element.scale.classList.remove('h-3');
			}
			paint(element.scale, [], []);
			array(element.scale.children.length).forEach((ind) => {
				if (altitude.sum[ind] > 0) {
					paint(element.scale.children[ind], ['flex'], ['hidden']);
				} else {
					paint(element.scale.children[ind], ['hidden'], ['flex']);
				}
				element.scale.children[ind].children[2].innerHTML = times(altitude.sum[ind]);
			});
			array(element.graph.children.length).forEach((ind) => {
				const binMax = altitude.bins[ind].reduce((accumulator, altitudeBin) => accumulator + altitudeBin, 0);
				array(element.graph.children[ind].children.length).forEach((i) => {
					const percent = binMax === 0 ? 0 : (altitude.bins[ind][i] / binMax) * 100;
					paint(element.graph.children[ind].children[i], altitudeColors[i], [], null, null, percent);
				});
			});
		};
		const errorAltitude = (element) => {
			error(element.stats);
			error(element.scale);
			array(element.graph.children.length).forEach((ind) => {
				array(element.graph.children[ind].children.length).forEach((i) => {
					error(element.graph.children[ind].children[i]);
				});
			});
		};
		const loadingThermal = (element) => {
			loading(element.stats, ['w-32', 'h-3.5'], [], '');
			loading(element.scale, ['h-3'], []);
			array(element.scale.children.length).forEach((ind) => {
				element.scale.children[ind].classList.add('hidden');
				element.scale.children[ind].classList.remove('flex');
			});
			array(element.graph.children.length).forEach((ind) => {
				array(element.graph.children[ind].children.length).forEach((i) => {
					loading(element.graph.children[ind].children[i], [], thermalColors[i], null, null, horizontalSkeletons[i]);
				});
			});
		};
		const paintThermal = (element, thermal) => {
			paint(
				element.stats,
				[],
				['w-32', 'h-3.5'],
				thermal.climb === null || thermal.sink === null ? '' : `+${(thermal.climb / 10).toFixed(1)}m/s -${(thermal.sink / 10).toFixed(1)}m/s`
			);
			const sumMax = thermal.sum.reduce((accumulator, thermal) => accumulator + thermal, 0);
			if (sumMax > 0) {
				element.scale.classList.remove('h-3');
			}
			paint(element.scale, [], []);
			array(element.scale.children.length).forEach((ind) => {
				if (thermal.sum[ind] > 0) {
					paint(element.scale.children[ind], ['flex'], ['hidden']);
				} else {
					paint(element.scale.children[ind], ['hidden'], ['flex']);
				}
				element.scale.children[ind].children[2].innerHTML = times(thermal.sum[ind]);
			});
			array(element.graph.children.length).forEach((ind) => {
				const binMax = thermal.bins[ind].reduce((accumulator, thermalBin) => accumulator + thermalBin, 0);
				array(element.graph.children[ind].children.length).forEach((i) => {
					const percent = binMax === 0 ? 0 : (thermal.bins[ind][i] / binMax) * 100;
					paint(element.graph.children[ind].children[i], thermalColors[i], [], null, null, percent);
				});
			});
		};
		const errorThermal = (element) => {
			error(element.stats);
			error(element.scale);
			array(element.graph.children.length).forEach((ind) => {
				array(element.graph.children[ind].children.length).forEach((i) => {
					error(element.graph.children[ind].children[i]);
				});
			});
		};
		const loadingSpeed = (element) => {
			loading(element.stats, ['w-32', 'h-3.5'], [], '');
			loading(element.scale, ['h-3'], []);
			array(element.scale.children.length).forEach((ind) => {
				element.scale.children[ind].classList.add('hidden');
				element.scale.children[ind].classList.remove('flex');
			});
			array(element.graph.children.length).forEach((ind) => {
				array(element.graph.children[ind].children.length).forEach((i) => {
					loading(element.graph.children[ind].children[i], [], speedColors[i], null, null, horizontalSkeletons[i]);
				});
			});
		};
		const paintSpeed = (element, speed) => {
			paint(element.stats, [], ['w-32', 'h-3.5'], speed.avg === null ? '' : `${speed.avg.toFixed(2)}km/h`);
			const sumMax = speed.sum.reduce((accumulator, speed) => accumulator + speed, 0);
			if (sumMax > 0) {
				element.scale.classList.remove('h-3');
			}
			paint(element.scale, [], []);
			array(element.scale.children.length).forEach((ind) => {
				if (speed.sum[ind] > 0) {
					paint(element.scale.children[ind], ['flex'], ['hidden']);
				} else {
					paint(element.scale.children[ind], ['hidden'], ['flex']);
				}
				element.scale.children[ind].children[2].innerHTML = times(speed.sum[ind]);
			});
			array(element.graph.children.length).forEach((ind) => {
				const binMax = speed.bins[ind].reduce((accumulator, speedBin) => accumulator + speedBin, 0);
				array(element.graph.children[ind].children.length).forEach((i) => {
					const percent = binMax === 0 ? 0 : (speed.bins[ind][i] / binMax) * 100;
					paint(element.graph.children[ind].children[i], speedColors[i], [], null, null, percent);
				});
			});
		};
		const errorSpeed = (element) => {
			error(element.stats);
			error(element.scale);
			array(element.graph.children.length).forEach((ind) => {
				array(element.graph.children[ind].children.length).forEach((i) => {
					error(element.graph.children[ind].children[i]);
				});
			});
		};
		const loadingGlide = (element) => {
			loading(element.stats, ['w-32', 'h-3.5'], [], '');
			loading(element.scale, ['h-3'], []);
			array(element.scale.children.length).forEach((ind) => {
				element.scale.children[ind].classList.add('hidden');
				element.scale.children[ind].classList.remove('flex');
			});
			array(element.graph.children.length).forEach((ind) => {
				array(element.graph.children[ind].children.length).forEach((i) => {
					loading(element.graph.children[ind].children[i], [], glideColors[i], null, null, horizontalSkeletons[i]);
				});
			});
		};
		const paintGlide = (element, glide) => {
			paint(element.stats, [], ['w-32', 'h-3.5'], glide.distance === 0 ? '' : `${(glide.distance / 1000).toFixed(2)}km`);
			const sumMax = glide.sum.reduce((accumulator, glide) => accumulator + glide, 0);
			if (sumMax > 0) {
				element.scale.classList.remove('h-3');
			}
			paint(element.scale, [], []);
			array(element.scale.children.length).forEach((ind) => {
				if (glide.sum[ind] > 0) {
					paint(element.scale.children[ind], ['flex'], ['hidden']);
				} else {
					paint(element.scale.children[ind], ['hidden'], ['flex']);
				}
				element.scale.children[ind].children[2].innerHTML = times(glide.sum[ind]);
			});
			array(element.graph.children.length).forEach((ind) => {
				const binMax = glide.bins[ind].reduce((accumulator, glideBin) => accumulator + glideBin, 0);
				array(element.graph.children[ind].children.length).forEach((i) => {
					const percent = binMax === 0 ? 0 : (glide.bins[ind][i] / binMax) * 100;
					paint(element.graph.children[ind].children[i], glideColors[i], [], null, null, percent);
				});
			});
		};
		const errorGlide = (element) => {
			error(element.stats);
			error(element.scale);
			array(element.graph.children.length).forEach((ind) => {
				array(element.graph.children[ind].children.length).forEach((i) => {
					error(element.graph.children[ind].children[i]);
				});
			});
		};
		const loadingLogbook = (element) => {
			resize(element.body, 8);
			array(element.body.children.length).forEach((ind) => {
				loading(element.body.children[ind].children[0], ['w-9', 'h-4'], [], '');
				loading(element.body.children[ind].children[1], ['w-9', 'h-4'], [], '');
				loading(element.body.children[ind].children[2], ['w-9', 'h-4'], [], '');
				loading(element.body.children[ind].children[3], ['w-10', 'h-4'], [], '');
				loading(element.body.children[ind].children[4], ['w-10', 'h-4'], [], '');
				loading(element.body.children[ind].children[5], ['w-12', 'h-4'], [], '');
				loading(element.body.children[ind].children[6], ['w-12', 'h-4'], [], '');
				loading(element.body.children[ind].children[7], ['w-16', 'h-4'], [], '');
				loading(element.body.children[ind].children[8], ['w-16', 'h-4'], [], '');
				loading(element.body.children[ind].children[9], ['w-20', 'h-4'], [], '');
			});
		};
		const paintLogbook = (element, data) => {
			resize(element.body, data.length);
			array(element.body.children.length).forEach((ind) => {
				if (data[ind]) {
					const startsAt = new Date(Number(data[ind].startsAt) * 1000);
					const endsAt = new Date(Number(data[ind].endsAt) * 1000);
					paint(
						element.body.children[ind].children[0],
						[],
						['w-9', 'h-4'],
						`${startsAt.getDate().toString().padStart(2, '0')}.${(startsAt.getMonth() + 1).toString().padStart(2, '0')}`
					);
					paint(
						element.body.children[ind].children[1],
						[],
						['w-9', 'h-4'],
						`${startsAt.getHours().toString().padStart(2, '0')}:${startsAt.getMinutes().toString().padStart(2, '0')}`
					);
					paint(
						element.body.children[ind].children[2],
						[],
						['w-9', 'h-4'],
						`${endsAt.getHours().toString().padStart(2, '0')}:${endsAt.getMinutes().toString().padStart(2, '0')}`
					);
					paint(element.body.children[ind].children[3], [], ['w-10', 'h-4'], `${data[ind].altitudeMin}m`);
					paint(element.body.children[ind].children[4], [], ['w-10', 'h-4'], `${data[ind].altitudeMax}m`);
					paint(element.body.children[ind].children[5], [], ['w-12', 'h-4'], `${(data[ind].maxClimb / 10).toFixed(1)}m/s`);
					paint(element.body.children[ind].children[6], [], ['w-12', 'h-4'], `${(data[ind].maxSink / 10).toFixed(1)}m/s`);
					paint(element.body.children[ind].children[7], [], ['w-16', 'h-4'], `${(data[ind].speedAvg / 100).toFixed(2)}km/h`);
					paint(element.body.children[ind].children[8], [], ['w-16', 'h-4'], `${(data[ind].speedMax / 100).toFixed(2)}km/h`);
					paint(element.body.children[ind].children[9], [], ['w-20', 'h-4'], `${(data[ind].distanceFlown / 1000).toFixed(2)}km`);
				}
			});
		};
		const errorLogbook = (element) => {
			array(element.body.children.length).forEach((ind) => {
				array(element.body.children[ind].children.length).forEach((i) => {
					error(element.body.children[ind].children[i]);
				});
			});
		};
		const parseYears = async (response) => {
			const buffer = await response.arrayBuffer();
			const data = new DataView(buffer);
			return array(buffer.byteLength / 2).map((ind) => {
				const year = data.getUint16(ind * 2 + 0);
				return { year };
			});
		};
		const parseFlights = async (response) => {
			const buffer = await response.arrayBuffer();
			const data = new DataView(buffer);
			let byteOffset = 0;
			let bitOffset = 0;
			const readBits = (bits) => {
				let value = 0;
				for (let index = 0; index < bits; index++) {
					const byte = data.getUint8(byteOffset);
					const bit = (byte >> (7 - bitOffset)) & 1;
					value = (value << 1) | bit;
					bitOffset++;
					if (bitOffset === 8) {
						byteOffset++;
						bitOffset = 0;
					}
				}
				return value;
			};
			const readBigBits = (bits) => {
				let value = 0n;
				for (let index = 0; index < bits; index++) {
					const byte = data.getUint8(byteOffset);
					const bit = (byte >> (7 - bitOffset)) & 1;
					value = (value << 1n) | BigInt(bit);
					bitOffset++;
					if (bitOffset === 8) {
						byteOffset++;
						bitOffset = 0;
					}
				}
				return value;
			};
			const flights = [];
			while (byteOffset < buffer.byteLength) {
				const startsAtBits = readBits(4) * 8;
				const endsAtBits = readBits(4) * 8;
				const altitudeBinsBits = [readBits(2) * 8, readBits(2) * 8, readBits(2) * 8, readBits(2) * 8, readBits(2) * 8];
				const altitudeMinBits = readBits(2) * 8;
				const altitudeMaxBits = readBits(2) * 8;
				const thermalBinsBits = [readBits(2) * 8, readBits(2) * 8, readBits(2) * 8, readBits(2) * 8, readBits(2) * 8];
				const maxClimbBits = 8;
				const maxSinkBits = 8;
				const speedBinsBits = [readBits(2) * 8, readBits(2) * 8, readBits(2) * 8, readBits(2) * 8, readBits(2) * 8];
				const speedAvgBits = 16;
				const speedMaxBits = 16;
				const glideBinsBits = [readBits(2) * 8, readBits(2) * 8, readBits(2) * 8, readBits(2) * 8, readBits(2) * 8];
				const distanceFlownBits = readBits(3) * 8;
				const paddingBits = readBits(1);
				const startsAt = readBigBits(startsAtBits);
				const endsAt = readBigBits(endsAtBits);
				const altitudeBins = [
					readBits(altitudeBinsBits[0]),
					readBits(altitudeBinsBits[1]),
					readBits(altitudeBinsBits[2]),
					readBits(altitudeBinsBits[3]),
					readBits(altitudeBinsBits[4]),
				];
				const altitudeMin = readBits(altitudeMinBits);
				const altitudeMax = readBits(altitudeMaxBits);
				const thermalBins = [
					readBits(thermalBinsBits[0]),
					readBits(thermalBinsBits[1]),
					readBits(thermalBinsBits[2]),
					readBits(thermalBinsBits[3]),
					readBits(thermalBinsBits[4]),
				];
				const maxClimb = readBits(maxClimbBits);
				const maxSink = readBits(maxSinkBits);
				const speedBins = [
					readBits(speedBinsBits[0]),
					readBits(speedBinsBits[1]),
					readBits(speedBinsBits[2]),
					readBits(speedBinsBits[3]),
					readBits(speedBinsBits[4]),
				];
				const speedAvg = readBits(speedAvgBits);
				const speedMax = readBits(speedMaxBits);
				const glideBins = [
					readBits(glideBinsBits[0]),
					readBits(glideBinsBits[1]),
					readBits(glideBinsBits[2]),
					readBits(glideBinsBits[3]),
					readBits(glideBinsBits[4]),
				];
				const distanceFlown = readBits(distanceFlownBits);
				flights.push({
					startsAt,
					endsAt,
					altitudeBins,
					altitudeMin,
					altitudeMax,
					thermalBins,
					maxClimb,
					maxSink,
					speedBins,
					speedAvg,
					speedMax,
					glideBins,
					distanceFlown,
				});
			}
			return flights;
		};
		const loadYears = fetching(
			years,
			(context) => window.requestAnimationFrame(() => loadingYears()),
			(context) => fetcher('get', `/api/year?user=${getUser()}`, null, { controller: context.controller }),
			async (context, response) => (context.data = await parseYears(response)),
			(context) => window.requestAnimationFrame(() => paintYears(context.data.length > 0 ? context.data : [null])),
			(context) => window.requestAnimationFrame(() => errorYears())
		);
		const loadFlights = fetching(
			flights,
			(context) => {
				window.requestAnimationFrame(() => loadingFlight(flight));
				window.requestAnimationFrame(() => loadingAirtime(airtime));
				window.requestAnimationFrame(() => loadingAltitude(altitude));
				window.requestAnimationFrame(() => loadingThermal(thermal));
				window.requestAnimationFrame(() => loadingSpeed(speed));
				window.requestAnimationFrame(() => loadingGlide(glide));
				window.requestAnimationFrame(() => loadingLogbook(logbook));
			},
			(context) => fetcher('get', `/api/flight?user=${getUser()}&year=${getYear()}`, null, { controller: context.controller }),
			async (context, response) => (context.data = await parseFlights(response)),
			(context) => {
				const summary = {
					flight: { sum: 0, bins: array(12).map(() => 0) },
					airtime: { sum: 0, bins: array(12).map(() => 0) },
					altitude: { min: null, max: null, sum: array(5).map(() => 0), bins: array(4).map((ind) => array(5).map(() => 0)) },
					thermal: { climb: null, sink: null, sum: array(5).map(() => 0), bins: array(4).map((ind) => array(5).map(() => 0)) },
					speed: { avg: null, sum: array(5).map(() => 0), bins: array(4).map((ind) => array(5).map(() => 0)) },
					glide: { distance: 0, sum: array(5).map(() => 0), bins: array(4).map((ind) => array(5).map(() => 0)) },
				};
				for (const item of context.data) {
					const month = new Date(Number(item.startsAt) * 1000).getMonth();
					summary.flight.sum++;
					summary.flight.bins[month]++;
					const seconds = Number(item.endsAt - item.startsAt);
					summary.airtime.sum += seconds;
					summary.airtime.bins[month] += seconds;
					const quarter = Math.floor(month / 3);
					if (summary.altitude.min === null || summary.altitude.min > item.altitudeMin) {
						summary.altitude.min = item.altitudeMin;
					}
					if (summary.altitude.max === null || summary.altitude.max < item.altitudeMax) {
						summary.altitude.max = item.altitudeMax;
					}
					for (let ind = 0; ind < summary.altitude.sum.length; ind++) {
						summary.altitude.sum[ind] += item.altitudeBins[ind];
						summary.altitude.bins[quarter][ind] += item.altitudeBins[ind];
					}
					if (summary.thermal.climb === null || summary.thermal.climb < item.maxClimb) {
						summary.thermal.climb = item.maxClimb;
					}
					if (summary.thermal.sink === null || summary.thermal.sink < item.maxSink) {
						summary.thermal.sink = item.maxSink;
					}
					for (let ind = 0; ind < summary.thermal.sum.length; ind++) {
						summary.thermal.sum[ind] += item.thermalBins[ind];
						summary.thermal.bins[quarter][ind] += item.thermalBins[ind];
					}
					for (let ind = 0; ind < summary.speed.sum.length; ind++) {
						summary.speed.sum[ind] += item.speedBins[ind];
						summary.speed.bins[quarter][ind] += item.speedBins[ind];
					}
					summary.glide.distance += item.distanceFlown;
					for (let ind = 0; ind < summary.glide.sum.length; ind++) {
						summary.glide.sum[ind] += item.glideBins[ind];
						summary.glide.bins[quarter][ind] += item.glideBins[ind];
					}
				}
				summary.speed.avg = summary.glide.distance === 0 ? null : (summary.glide.distance / summary.airtime.sum) * 3.6;
				window.requestAnimationFrame(() => paintFlight(flight, summary.flight));
				window.requestAnimationFrame(() => paintAirtime(airtime, summary.airtime));
				window.requestAnimationFrame(() => paintAltitude(altitude, summary.altitude));
				window.requestAnimationFrame(() => paintThermal(thermal, summary.thermal));
				window.requestAnimationFrame(() => paintSpeed(speed, summary.speed));
				window.requestAnimationFrame(() => paintGlide(glide, summary.glide));
				window.requestAnimationFrame(() => paintLogbook(logbook, context.data.length > 0 ? context.data : [null]));
			},
			(context) => {
				window.requestAnimationFrame(() => errorFlight(flight));
				window.requestAnimationFrame(() => errorAirtime(airtime));
				window.requestAnimationFrame(() => errorAltitude(altitude));
				window.requestAnimationFrame(() => errorThermal(thermal));
				window.requestAnimationFrame(() => errorSpeed(speed));
				window.requestAnimationFrame(() => errorGlide(glide));
				window.requestAnimationFrame(() => errorLogbook(logbook));
			}
		);
		const upload = document.getElementById('upload');
		const readFile = (file) => {
			return new Promise((resolve) => {
				const reader = new FileReader();
				reader.onload = (event) => resolve(event.target.result);
				reader.readAsText(file);
			});
		};
		const hashFile = async (content) => {
			const data = new TextEncoder().encode(content);
			const buffer = await crypto.subtle.digest('sha-256', data);
			const array = Array.from(new Uint8Array(buffer));
			const hex = array.map((byte) => byte.toString(16).padStart(2, '0'));
			return { hex: hex.join(''), bin: buffer };
		};
		const postFlight = async (hash, flight) => {
			const buffer = new ArrayBuffer(102);
			const view = new DataView(buffer);
			const arr = new Uint8Array(hash.bin);
			for (let index = 0; index < 32; index++) {
				view.setUint8(index, arr[index]);
			}
			view.setBigUint64(32, flight.startsAt);
			view.setBigUint64(40, flight.endsAt);
			for (let index = 0; index < 5; index++) {
				view.setUint16(48 + index * 2, flight.altitudeBins[index]);
			}
			view.setUint16(58, flight.altitudeMin);
			view.setUint16(60, flight.altitudeMax);
			for (let index = 0; index < 5; index++) {
				view.setUint16(62 + index * 2, flight.thermalBins[index]);
			}
			view.setUint8(72, Math.abs(flight.maxClimb * 10));
			view.setUint8(73, Math.abs(flight.maxSink * 10));
			for (let index = 0; index < 5; index++) {
				view.setUint16(74 + index * 2, flight.speedBins[index]);
			}
			view.setUint16(84, flight.speedAvg * 100);
			view.setUint16(86, flight.speedMax * 100);
			for (let index = 0; index < 5; index++) {
				view.setUint16(88 + index * 2, flight.glideBins[index]);
			}
			view.setUint32(98, flight.distanceFlown);
			try {
				const response = await fetcher('post', '/api/flight', buffer, { headers: { 'content-type': 'application/octet-stream' } });
				notification('success', `Successfully uploaded flight ${hash.hex.substring(0, 8)}`);
				if (
					array(ranges.children.length).every((ind) => +ranges.children[ind].children[0].innerText !== new Date(Number(flight.startsAt) * 1000).getFullYear())
				) {
					loadYears();
				}
				if (getYear() === new Date(Number(flight.startsAt) * 1000).getFullYear()) {
					loadFlights();
				}
			} catch (err) {
				report(err);
			}
		};
		const uploadFlights = async (event) => {
			const store = upload.children[0].innerText;
			upload.children[0].innerText = 'uploading...';
			upload.children[1].disabled = true;
			upload.children[0].classList.add('cursor-progress');
			upload.children[0].classList.remove('cursor-pointer');
			const files = Array.from(event.target.files);
			for (const file of files) {
				const content = await readFile(file);
				const hash = await hashFile(content);
				const data = parseIgcFile(content);
				if (data.length < 64) {
					notification('info', `Flight ${hash.hex.substring(0, 8)} is too short`);
					continue;
				}
				if (data.length > 65536) {
					notification('info', `Flight ${hash.hex.substring(0, 8)} is too long`);
					continue;
				}
				const flight = parseFlight(data);
				await postFlight(hash, flight);
			}
			upload.children[0].innerText = store;
			upload.children[1].disabled = false;
			upload.children[0].classList.add('cursor-pointer');
			upload.children[0].classList.remove('cursor-progress');
		};
		const parseIgcFile = (content) => {
			const dateRegex = new RegExp(/^HFDTE([0-2][0-9]|3[0-1])(0[1-9]|1[0-2])\d{2}$/);
			const bodyRegex = new RegExp(/^B([0-1][0-9]|2[0-3])([0-5][0-9]){2}([0-8][0-9]|90)\d{5}(N|S)(0[0-9][0-9]|1[0-7][0-9]|180)\d{5}(E|W)(A|V)\d{5}\d{5}$/);
			const lines = content.split('\r\n').map((line) => line.substring(0, line.length));
			const head = lines.filter((line) => line.startsWith('HF'));
			const body = lines.filter((line) => line.startsWith('B'));
			const raw = head.find((line) => line.match(dateRegex));
			let date = null;
			if (raw) {
				date = `20${raw.substring(9, 11)}-${raw.substring(7, 9)}-${raw.substring(5, 7)}`;
			} else {
				date = '1970-01-01';
			}
			const data = [];
			for (let index = 0; index < body.length; index++) {
				const line = body[index];
				if (line.match(bodyRegex)) {
					const time = `${date}T${line.substring(1, 3)}:${line.substring(3, 5)}:${line.substring(5, 7)}Z`;
					const latDeg = +line.substring(7, 9);
					const latMin = +line.substring(9, 11);
					const latSec = +line.substring(11, 14);
					const lat = latDeg * 1000 * 60 + latMin * 1000 + latSec;
					const lonDeg = +line.substring(15, 18);
					const lonMin = +line.substring(18, 20);
					const lonSec = +line.substring(20, 23);
					const lon = lonDeg * 1000 * 60 + lonMin * 1000 + lonSec;
					const altIsa = +line.substring(25, 30);
					const altGps = +line.substring(30, 36);
					const point = {
						time: new Date(time).getTime() / 1000,
						lat: line[14] === 'S' ? -lat : lat,
						lon: line[23] === 'W' ? -lon : lon,
						altIsa,
						altGps,
					};
					data.push(point);
				}
			}
			return data;
		};
		const radians = (degrees) => {
			return (degrees * Math.PI) / 180;
		};
		const heading = (startPoint, endPoint) => {
			const scaleFactor = 1000 * 60;
			const latDiff = (endPoint.lat - startPoint.lat) / scaleFactor;
			const lonDiff = (endPoint.lon - startPoint.lon) / scaleFactor;
			const y = Math.sin(radians(lonDiff)) * Math.cos(radians(endPoint.lat / scaleFactor));
			const x =
				Math.cos(radians(startPoint.lat / scaleFactor)) * Math.sin(radians(endPoint.lat / scaleFactor)) -
				Math.sin(radians(startPoint.lat / scaleFactor)) * Math.cos(radians(endPoint.lat / scaleFactor)) * Math.cos(radians(lonDiff));
			const rawHeading = (Math.atan2(y, x) * 180) / Math.PI;
			return +((rawHeading + 360) % 360).toFixed(0);
		};
		const distance = (startPoint, endPoint) => {
			const earthRadius = 6371;
			const scaleFactor = 1000 * 60;
			const latDiff = (endPoint.lat - startPoint.lat) / scaleFactor;
			const lonDiff = (endPoint.lon - startPoint.lon) / scaleFactor;
			const a =
				Math.sin(radians(latDiff) / 2) * Math.sin(radians(latDiff) / 2) +
				Math.cos(startPoint.lat / scaleFactor) * Math.cos(endPoint.lat / scaleFactor) * Math.sin(radians(lonDiff) / 2) * Math.sin(radians(lonDiff) / 2);
			const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
			return +(earthRadius * c * 1000).toFixed(1);
		};
		const parseFlight = (data) => {
			const flight = {
				startsAt: null,
				endsAt: null,
				altitudeBins: [0, 0, 0, 0, 0],
				altitudeMin: null,
				altitudeMax: null,
				thermalBins: [0, 0, 0, 0, 0],
				maxClimb: null,
				maxSink: null,
				speedBins: [0, 0, 0, 0, 0],
				speedAvg: null,
				speedMax: null,
				glideBins: [0, 0, 0, 0, 0],
				distanceFlown: 0,
			};
			flight.startsAt = BigInt(data[0].time);
			flight.endsAt = BigInt(data[data.length - 1].time);
			const track = { headings: [], distances: [] };
			for (let index = 0; index < data.length; index++) {
				if (data[index].altGps >= 0) {
					const category = Math.floor(data[index].altGps / 1000);
					flight.altitudeBins[category <= 4 ? category : 4]++;
				}
				if (flight.altitudeMin === null || flight.altitudeMin > data[index].altGps) {
					flight.altitudeMin = data[index].altGps;
				}
				if (flight.altitudeMax === null || flight.altitudeMax < data[index].altGps) {
					flight.altitudeMax = data[index].altGps;
				}
				if (index + 2 < data.length) {
					track.headings.push(heading(data[index], data[index + 1]) - heading(data[index + 1], data[index + 2]));
					if (track.headings.length > 10) {
						track.headings.shift();
					}
					flight.distanceFlown += distance(data[index], data[index + 1]);
					track.distances.push(distance(data[index], data[index + 1]));
					if (track.distances.length > 10) {
						track.distances.shift();
					}
				}
				if (index >= 10) {
					const trackHeadingDiff = track.headings.reduce((accumulator, diff) => accumulator + diff, 0);
					const altitudeDiff = data[index].altIsa - data[index - 1].altIsa;
					const trackAltitudeDiff = data[index].altIsa - data[index - 10].altIsa;
					const trackDistance = track.distances.reduce((accumulator, distance) => accumulator + distance, 0);
					const trackSpeed = (trackDistance / track.distances.length) * 3.6;
					if (altitudeDiff >= 0 && Math.abs(trackHeadingDiff) >= 120) {
						const category = Math.floor(altitudeDiff);
						flight.thermalBins[category <= 4 ? category : 4]++;
					}
					if (trackAltitudeDiff >= 0 && (flight.maxClimb === null || flight.maxClimb < trackAltitudeDiff / 10)) {
						flight.maxClimb = trackAltitudeDiff / 10;
					}
					if (trackAltitudeDiff <= 0 && (flight.maxSink === null || flight.maxSink > trackAltitudeDiff / 10)) {
						flight.maxSink = trackAltitudeDiff / 10;
					}
					switch (true) {
						case trackSpeed >= 20 && trackSpeed < 30:
							flight.speedBins[0]++;
							break;
						case trackSpeed >= 30 && trackSpeed < 40:
							flight.speedBins[1]++;
							break;
						case trackSpeed >= 40 && trackSpeed < 50:
							flight.speedBins[2]++;
							break;
						case trackSpeed >= 50 && trackSpeed < 60:
							flight.speedBins[3]++;
							break;
						case trackSpeed >= 60 && trackSpeed < 70:
							flight.speedBins[4]++;
							break;
					}
					if (flight.speedMax === null || flight.speedMax < trackSpeed) {
						flight.speedMax = trackSpeed;
					}
					if (trackAltitudeDiff <= 0 && Math.abs(trackHeadingDiff) <= 60) {
						const glideRatio = trackDistance / Math.abs(trackAltitudeDiff);
						switch (true) {
							case glideRatio >= 4 && glideRatio < 6:
								flight.glideBins[0]++;
								break;
							case glideRatio >= 6 && glideRatio < 8:
								flight.glideBins[1]++;
								break;
							case glideRatio >= 8 && glideRatio < 10:
								flight.glideBins[2]++;
								break;
							case glideRatio >= 10 && glideRatio < 12:
								flight.glideBins[3]++;
								break;
							case glideRatio >= 12 && glideRatio < 14:
								flight.glideBins[4]++;
								break;
						}
					}
				}
			}
			flight.speedAvg = (flight.distanceFlown / (Number(flight.endsAt) - Number(flight.startsAt))) * 3.6;
			return flight;
		};
	</script>
</html>
